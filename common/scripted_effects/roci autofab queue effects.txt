pay_for_swapping = {
	export_resource_stockpile_to_variable = { resource = alloys variable = autofab_alloys_tracking }
	if = {
		limit = {
			check_variable = { which = autofab_alloys_tracking value > autofab_alloy_debt }
		}
		add_resource = {
			alloys = -1
			mult = autofab_alloy_debt
		}
		set_variable = { which = autofab_alloy_debt value = 0 }
	}
	else = {
		change_variable = { which = autofab_alloys_tracking value = -1 }
		round_variable = autofab_alloys_tracking
		add_resource = {
			alloys = -1
			mult = autofab_alloys_tracking
		}
		subtract_variable = { which = autofab_alloy_debt value = autofab_alloys_tracking }
	}
}

#Planet Scope
pay_for_autofab = {
	if = {
		limit = {
			uses_base_district_set = yes
		}
		owner = {
			add_resource = {
				energy = @Negdistrictcost
			}
			add_resource = {
				minerals = @Negdistrictcost
			}
			add_resource = {
				alloys = @Negautofaballoycost
			}
		}
	}
	else_if = {
		limit = {
			uses_habitat_district_set = yes
		}
		owner = {
			add_resource = {
				energy = @Neghabdistrictcost
			}
			add_resource = {
				minerals = @Neghabdistrictcost
			}
			add_resource = {
				alloys = @Negautofaballoycost
			}
		}
	}
	else_if = {
		limit = {
			uses_city_district_set = yes
		}
		owner = {
			add_resource = {
				energy = @Negcitydistrictcost
			}
			add_resource = {
				minerals = @Negcitydistrictcost
			}
			add_resource = {
				alloys = @Negautofaballoycost
			}
		}
	}
	else_if = {
		limit = {
			uses_ringworld_district_set = yes
		}
		owner = {
			add_resource = {
				energy = @Negringdistrictcost
			}
			add_resource = {
				minerals = @Negringdistrictcost
			}
			add_resource = {
				alloys = @Negautofaballoycost
			}
		}
	}
}
pay_for_district = {
	if = {
		limit = {
			uses_base_district_set = yes
		}
		owner = {
			add_resource = {
				minerals = @Negdistrictcost
			}
			add_resource = {
				alloys = @Negfactoryalloycost
			}
		}
	}
	else_if = {
		limit = {
			uses_habitat_district_set = yes
		}
		owner = {
			add_resource = {
				minerals = @Neghabdistrictcost
			}
			add_resource = {
				alloys = @Negfactoryalloycost
			}
		}
	}
	else_if = {
		limit = {
			uses_city_district_set = yes
		}
		owner = {
			add_resource = {
				minerals = @Negcitydistrictcost
			}
			add_resource = {
				alloys = @Negfactoryalloycost
			}
		}
	}
	else_if = {
		limit = {
			uses_ringworld_district_set = yes
		}
		owner = {
			add_resource = {
				minerals = @Negringdistrictcost
			}
			add_resource = {
				alloys = @Negfactoryalloycost
			}
		}
	}
}